---
meta:
  title: useDebounce
  description: To delay a event until no further request.
  tags: react, react-hook, ironman30
---

import {
  Table,
  Thead,
  Tbody,
  Tr,
  Th,
  Td,
  TableContainer,
  Code,
} from "@chakra-ui/react"
import PostTags from "~/components/PostTags"
import LinkTag from "~/components/LinkTag"
import Example from "~/libs/hooks/useDebounce/Example"
import Example2 from "~/libs/hooks/useDebounce/Example/noDebounce"

<PostTags tags={attributes.meta.tags} />

# {attributes.meta.title}

#### {attributes.meta.description}

---

<LinkTag />

[鐵人賽連結](https://ithelp.ithome.com.tw/articles/10297565)

---

```jsx
function useDebounce(cb, delay, deps) {
  const initRef = useRef(true)
  const [isPending, setIsPending] = useState(false)

  useEffect(() => {
    if (initRef.current) {
      initRef.current = false
      return
    }

    setIsPending(true)
    const timeout = setTimeout(() => {
      cb()
      setIsPending(false)
    }, delay)

    return () => clearTimeout(timeout)
  }, deps)

  return isPending
}
```

---

#### Params

<TableContainer bgColor="#00000010" borderRadius="4px">
  <Table sx={{ "& *": { borderBottomColor: "#00000010!important" } }}>
    <Thead>
      <Tr>
        <Th>name</Th>
        <Th>type</Th>
        <Th textAlign="right">description</Th>
      </Tr>
    </Thead>
    <Tbody>
      <Tr>
        <Td>
          <Code>cb</Code>
        </Td>
        <Td>
          <Code>function</Code>
        </Td>
        <Td textAlign="right">
          callback function to fire depends on setTimeout
        </Td>
      </Tr>
      <Tr>
        <Td>
          <Code>delay</Code>
        </Td>
        <Td>
          <Code>number</Code>
        </Td>
        <Td textAlign="right">ms (unit), default as 250ms</Td>
      </Tr>
      <Tr>
        <Td>
          <Code>deps</Code>
        </Td>
        <Td>
          <Code>array</Code>
        </Td>
        <Td textAlign="right">same as useEffect deps</Td>
      </Tr>
    </Tbody>
  </Table>
</TableContainer>

#### Return

<TableContainer bgColor="#00000010" borderRadius="4px">
  <Table sx={{ "& *": { borderBottomColor: "#00000010!important" } }}>
    <Thead>
      <Tr>
        <Th>name</Th>
        <Th>type</Th>
        <Th textAlign="right">description</Th>
      </Tr>
    </Thead>
    <Tbody>
      <Tr>
        <Td>
          <Code>isPending</Code>
        </Td>
        <Td>
          <Code>boolean</Code>
        </Td>
        <Td textAlign="right"></Td>
      </Tr>
    </Tbody>
  </Table>
</TableContainer>

---

### Example

<Example />

---

### Regular Version (no debounce)

<Example2 />
